{"version":3,"file":"commonHelpers.js","sources":["../src/fetch-images.js","../src/function.js"],"sourcesContent":["import axios from 'axios';\n//import { searchImages } from '';\n\n    \nconst API_KEY =\n  '34554984-68074c5646cb7a45ce2c04cbc';\n\nconst PIXABAY_URL_IMAGES = 'https://pixabay.com/api/?';\n\nconst axiosInstance = axios.create({\n  baseURL: PIXABAY_URL_IMAGES,\n   params: {\n    key: API_KEY,\n    image_type: 'photo', \n    orientation: 'horizontal',\n    safesearch: true,\n  },\n});\n\nexport function fetchPictures() {\n  return axiosInstance.get('', {\n    params: {\n      q: query, \n      page: page, \n      per_page: perPage,\n    }\n  })\n\n    .then(response => response.data)\n    .catch(error => {\n      console.error(`Error fetching pictures: ${error}`);\n      return Promise.resolve([]);\n    });\n  \n}\n\n \nconst gallery = document.querySelector('.gallery');\n\nexport function createMarkup(images) {\n  console.log(images);\n  const markup = images\n    .map(image => {\n      const {\n        id,\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = image;\n      return `\n        <a class=\"gallery__link\" href=\"${largeImageURL}\">\n          <div class=\"gallery-item\" id=\"${id}\">\n            <img class=\"gallery-item__img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b>${likes}</p>\n              <p class=\"info-item\"><b>Views</b>${views}</p>\n              <p class=\"info-item\"><b>Comments</b>${comments}</p>\n              <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n            </div>\n          </div>\n        </a>\n      `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\n\n\n","import { fetchPictures, createMarkup } from './fetch-images';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.btn-load-more');\nlet query = '';\nlet page = 1;\nlet simpleLightBox;\nconst perPage = 40;\n\nsearchForm.addEventListener('submit', onSearchForm);\nloadMoreButton.addEventListener('click', onLoadMoreButton);\n\n\n\nasync function onSearchForm(event) {\n  event.preventDefault();\n  window.scrollTo({ top: 0 });\n  page = 1;\n  query = event.currentTarget.searchQuery.value.trim();\n  gallery.innerHTML = '';\n  loadMoreButton.classList.add('is-hidden');\n\n  if (query === '') {\n    alertNoEmptySearch();\n    return;\n  }\n\n  try {\n    const data = await fetchPictures(query, page, perPage);\n\n    if (data.totalHits === 0) {\n      alertNoImagesFound();\n    } else {\n      renderQuery(data.hits);\n\n      simpleLightBox = new SimpleLightbox('.gallery a').refresh();\n\n      alertImagesFound(data);\n\n      if (data.totalHits > perPage) {\n        loadMoreButton.classList.remove('is-hidden');\n      }\n    }\n  } catch (error) {\n   // console.log(error);\n  } finally {\n    () => {\n      searchForm.reset();\n    };\n  }\n}\n\nasync function onLoadMoreButton() {\n  page += 1;\n  simpleLightBox.destroy();\n\n  try {\n    const data = await fetchPictures(query, page, perPage); \n\n    createMarkup(data.hits);\n    simpleLightBox = new SimpleLightbox('.gallery a').refresh();\n\n    const totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (page > totalPages) {\n      loadMoreButton.classList.add('is-hidden');\n      alertEndOfSearch();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\nfunction alertImagesFound(data) {\n  Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`);\n}\n\nfunction alertNoEmptySearch() {\n  Notiflix.Notify.failure(\n    'The search string cannot be empty. Please specify your search query.'\n  );\n}"],"names":["API_KEY","PIXABAY_URL_IMAGES","axiosInstance","axios","fetchPictures","response","error","gallery","createMarkup","images","markup","image","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads","searchForm","loadMoreButton","query","page","simpleLightBox","perPage","onSearchForm","onLoadMoreButton","event","alertNoEmptySearch","data","SimpleLightbox","alertImagesFound","totalPages","Notiflix"],"mappings":"owBAIA,MAAMA,EACJ,qCAEIC,EAAqB,4BAErBC,EAAgBC,EAAM,OAAO,CACjC,QAASF,EACR,OAAQ,CACP,IAAKD,EACL,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACH,CAAC,EAEM,SAASI,GAAgB,CAC9B,OAAOF,EAAc,IAAI,GAAI,CAC3B,OAAQ,CACN,EAAG,MACH,KACA,SAAU,OACX,CACL,CAAG,EAEE,KAAKG,GAAYA,EAAS,IAAI,EAC9B,MAAMC,IACL,QAAQ,MAAM,4BAA4BA,GAAO,EAC1C,QAAQ,QAAQ,CAAA,CAAE,EAC1B,CAEL,CAGA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAaC,EAAQ,CACnC,QAAQ,IAAIA,CAAM,EAClB,MAAMC,EAASD,EACZ,IAAIE,GAAS,CACZ,KAAM,CACJ,GAAAC,EACA,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGR,EACJ,MAAO;AAAA,yCAC4BE;AAAA,0CACCD;AAAA,kDACQE,WAAsBC;AAAA;AAAA,iDAEvBC;AAAA,iDACAC;AAAA,oDACGC;AAAA,qDACCC;AAAA;AAAA;AAAA;AAAA,OAKrD,CAAK,EACA,KAAK,EAAE,EAEVZ,EAAQ,mBAAmB,YAAaG,CAAM,CAChD,CChEA,MAAMU,EAAa,SAAS,cAAc,cAAc,EAClDb,EAAU,SAAS,cAAc,UAAU,EAC3Cc,EAAiB,SAAS,cAAc,gBAAgB,EAC9D,IAAIC,EAAQ,GACRC,EAAO,EACPC,EACJ,MAAMC,EAAU,GAEhBL,EAAW,iBAAiB,SAAUM,CAAY,EAClDL,EAAe,iBAAiB,QAASM,CAAgB,EAIzD,eAAeD,EAAaE,EAAO,CAQjC,GAPAA,EAAM,eAAc,EACpB,OAAO,SAAS,CAAE,IAAK,CAAG,CAAA,EAC1BL,EAAO,EACPD,EAAQM,EAAM,cAAc,YAAY,MAAM,KAAI,EAClDrB,EAAQ,UAAY,GACpBc,EAAe,UAAU,IAAI,WAAW,EAEpCC,IAAU,GAAI,CAChBO,IACA,MACD,CAED,GAAI,CACF,MAAMC,EAAO,MAAM1B,EAAckB,EAAOC,EAAME,CAAO,EAEjDK,EAAK,YAAc,EACrB,sBAEA,YAAYA,EAAK,IAAI,EAErBN,EAAiB,IAAIO,EAAe,YAAY,EAAE,QAAO,EAEzDC,EAAiBF,CAAI,EAEjBA,EAAK,UAAYL,GACnBJ,EAAe,UAAU,OAAO,WAAW,EAGhD,MAAC,CAEJ,QAAY,CAIT,CACH,CAEA,eAAeM,GAAmB,CAChCJ,GAAQ,EACRC,EAAe,QAAO,EAEtB,GAAI,CACF,MAAMM,EAAO,MAAM1B,EAAckB,EAAOC,EAAME,CAAO,EAErDjB,EAAasB,EAAK,IAAI,EACtBN,EAAiB,IAAIO,EAAe,YAAY,EAAE,QAAO,EAEzD,MAAME,EAAa,KAAK,KAAKH,EAAK,UAAYL,CAAO,EAEjDF,EAAOU,IACTZ,EAAe,UAAU,IAAI,WAAW,EACxC,mBAEH,OAAQf,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAGA,SAAS0B,EAAiBF,EAAM,CAC9BI,EAAS,OAAO,QAAQ,oBAAoBJ,EAAK,mBAAmB,CACtE,CAEA,SAASD,GAAqB,CAC5BK,EAAS,OAAO,QACd,sEACJ,CACA"}