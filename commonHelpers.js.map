{"version":3,"file":"commonHelpers.js","sources":["../src/fetch-images.js","../src/function.js"],"sourcesContent":["import axios from 'axios';\n\n\n    \nconst API_KEY =\n  '34554984-68074c5646cb7a45ce2c04cbc';\n\nconst PIXABAY_URL_IMAGES = 'https://pixabay.com/api/';\n\n\n\nexport async function fetchPictures(query, page) {\n  const { data } = await axios\n    (`https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}`)\n\n  return data\n\n     \n}\n\n \nconst gallery = document.querySelector('.gallery');\n\nexport function createMarkup(images) {\n  console.log(images);\n  const markup = images\n    .map(image => {\n      const {\n        id,\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = image;\n      return `\n        <a class=\"gallery__link\" href=\"${largeImageURL}\">\n          <div class=\"gallery-item\" id=\"${id}\">\n            <img class=\"gallery-item__img\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b>${likes}</p>\n              <p class=\"info-item\"><b>Views</b>${views}</p>\n              <p class=\"info-item\"><b>Comments</b>${comments}</p>\n              <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n            </div>\n          </div>\n        </a>\n      `;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\n\n\n","import { fetchPictures, createMarkup } from './fetch-images';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.css';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.btn-load-more');\nlet query = '';\nlet page = 1;\nlet simpleLightBox = new SimpleLightbox('.gallery a');\nconst perPage = 40;\n\nsearchForm.addEventListener('submit', onSearchForm);\nloadMoreButton.addEventListener('click', onLoadMoreButton);\nloadMoreButton.style.visibility = 'hidden';\n\n\nasync function onSearchForm(event) {\n  event.preventDefault();\n  page = 1;\n  query = event.currentTarget.searchQuery.value.trim();\n  gallery.innerHTML = '';\n  searchForm.reset();\n  loadMoreButton.style.visibility = 'hidden';\n\n  if (query === '') {\n    alertNoEmptySearch();\n    return;\n  }\n\n  try {\n    const data = await fetchPictures(query, page, perPage);\n\n    if (data.totalHits === 0) {\n     alertNoImagesFound();\n    } {\n      createMarkup(data.hits);\n\n      simpleLightBox.refresh();\n\n      alertImagesFound(data);\n\n      if (data.totalHits > perPage) {\n        loadMoreButton.style.visibility = 'visible';\n      }\n    }\n  } catch (error) {\n   console.log(error);\n  } finally {\n    () => {\n      searchForm.reset();\n    };\n  }\n}\n\nasync function onLoadMoreButton() {\n  page += 1;\n  simpleLightBox.destroy();\n\n  try {\n    const data = await fetchPictures(query, page, perPage); \n\n    createMarkup(data.hits);\n    simpleLightBox = new SimpleLightbox('.gallery a').refresh();\n\n    const totalPages = Math.ceil(data.totalHits / perPage);\n\n    if (page > totalPages) {\n      loadMoreButton.style.visibility = 'hidden';\n      alertEndOfSearch();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n\nfunction alertImagesFound(data) {\n  iziToast.success({\n                title: 'Wow!',\n                message: `Hooray! We found ${data.totalHits} images.`,\n                position: 'topRight',\n              });\n}\n\nfunction alertNoEmptySearch() {\n  iziToast.error({\n                  title: 'Error!',\n                  message: 'The search string cannot be empty. Please specify your search query.',\n                  position: 'topRight',\n                });\n}"],"names":["API_KEY","fetchPictures","query","page","data","axios","gallery","createMarkup","images","markup","image","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads","searchForm","loadMoreButton","simpleLightBox","SimpleLightbox","perPage","onSearchForm","onLoadMoreButton","event","alertNoEmptySearch","alertImagesFound","error","totalPages","iziToast"],"mappings":"owBAIA,MAAMA,EACJ,qCAMK,eAAeC,EAAcC,EAAOC,EAAM,CAC/C,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EACpB,gCAAgCL,OAAaE,kEAAsEC,GAAM,EAE5H,OAAOC,CAGT,CAGA,MAAME,EAAU,SAAS,cAAc,UAAU,EAE1C,SAASC,EAAaC,EAAQ,CACnC,QAAQ,IAAIA,CAAM,EAClB,MAAMC,EAASD,EACZ,IAAIE,GAAS,CACZ,KAAM,CACJ,GAAAC,EACA,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGR,EACJ,MAAO;AAAA,yCAC4BE;AAAA,0CACCD;AAAA,kDACQE,WAAsBC;AAAA;AAAA,iDAEvBC;AAAA,iDACAC;AAAA,oDACGC;AAAA,qDACCC;AAAA;AAAA;AAAA;AAAA,OAKrD,CAAK,EACA,KAAK,EAAE,EAEVZ,EAAQ,mBAAmB,YAAaG,CAAM,CAChD,CC/CA,MAAMU,EAAa,SAAS,cAAc,cAAc,EAClDb,EAAU,SAAS,cAAc,UAAU,EAC3Cc,EAAiB,SAAS,cAAc,gBAAgB,EAC9D,IAAIlB,EAAQ,GACRC,EAAO,EACPkB,EAAiB,IAAIC,EAAe,YAAY,EACpD,MAAMC,EAAU,GAEhBJ,EAAW,iBAAiB,SAAUK,CAAY,EAClDJ,EAAe,iBAAiB,QAASK,CAAgB,EACzDL,EAAe,MAAM,WAAa,SAGlC,eAAeI,EAAaE,EAAO,CAQjC,GAPAA,EAAM,eAAc,EACpBvB,EAAO,EACPD,EAAQwB,EAAM,cAAc,YAAY,MAAM,KAAI,EAClDpB,EAAQ,UAAY,GACpBa,EAAW,MAAK,EAChBC,EAAe,MAAM,WAAa,SAE9BlB,IAAU,GAAI,CAChByB,IACA,MACD,CAED,GAAI,CACF,MAAMvB,EAAO,MAAMH,EAAcC,EAAOC,EAAMoB,CAAO,EAEjDnB,EAAK,YAAc,GACtB,qBAECG,EAAaH,EAAK,IAAI,EAEtBiB,EAAe,QAAO,EAEtBO,EAAiBxB,CAAI,EAEjBA,EAAK,UAAYmB,IACnBH,EAAe,MAAM,WAAa,UAGvC,OAAQS,EAAP,CACD,QAAQ,IAAIA,CAAK,CACpB,QAAY,CAIT,CACH,CAEA,eAAeJ,GAAmB,CAChCtB,GAAQ,EACRkB,EAAe,QAAO,EAEtB,GAAI,CACF,MAAMjB,EAAO,MAAMH,EAAcC,EAAOC,EAAMoB,CAAO,EAErDhB,EAAaH,EAAK,IAAI,EACtBiB,EAAiB,IAAIC,EAAe,YAAY,EAAE,QAAO,EAEzD,MAAMQ,EAAa,KAAK,KAAK1B,EAAK,UAAYmB,CAAO,EAEjDpB,EAAO2B,IACTV,EAAe,MAAM,WAAa,SAClC,mBAEH,OAAQS,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAGA,SAASD,EAAiBxB,EAAM,CAC9B2B,EAAS,QAAQ,CACH,MAAO,OACP,QAAS,oBAAoB3B,EAAK,oBAClC,SAAU,UAC1B,CAAe,CACf,CAEA,SAASuB,GAAqB,CAC5BI,EAAS,MAAM,CACC,MAAO,SACP,QAAS,uEACT,SAAU,UAC5B,CAAiB,CACjB"}